<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Crystal Rood</title>
    <!-- For pretty print for more info:https://stackoverflow.com/questions/1270221/how-to-format-code-in-html-css-js-php  <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
    -->
    <script src="https://rawgit.com/google/code-prettify/master/loader/run_prettify.js?autoload=true&amp;skin=sunburst&amp;lang=css" defer=""></script>

    
    <!-- Bootstrap Core CSS -->
    <link href="../css/bootstrap.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="../css/blog-home.css" rel="stylesheet">
        <!-- jQuery -->
    <script src="js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.js"></script>


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <img src="wave_peanuts.png" height="120px" width="100%"/>
    <![endif]-->

</head>

<body onload="prettyPrint()">

    <!-- Navigation -->
    
      <nav id="navbar-inverse"class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <!--end change background colors on page reload-->
        <div class="container">

            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
              
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="../">Crystal Rood</a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li>
                        <a href="../about.html">About</a>
                    </li>
                    <li>
                        <a href="../contact.html">Contact</a>
                    </li>

                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

       <!-- Page Content -->
    <div class="container">

        <div class="row">
          <!-- Custom stylesheet, it must be in the same directory as the html file -->
          <link rel="stylesheet" href="notebooks.css">


        <html> 

        <body>
        <!--adjust title here-->  
        <h3>Question 1 - Fradulent user accounts</h3>
        <br></br>  

        <div>
        Here’s a daily table of a given online advertiser for Hooli. The table is called ad_account and the columns are:
        <br></br>
        <table>
        <col style="width: 200px">
        <col style="width: 200px">
        <col style="width: 200px">
        </colgroup>
          <tr>
            <th class="tg-lvs2">Column Name</th>
            <th class="tg-lvs2">Data Type</th>
            <th class="tg-lvs2">Description</th>
          </tr>
          <tr>
            <td class="tg-yqwd">account_id</td>
            <td class="tg-yqwd">int</td>
            <td class="tg-yqwd">unique identifier for each account</td>
          </tr>
          <tr>
            <td class="tg-lvs2">date</td>
            <td class="tg-lvs2">string</td>
            <td class="tg-lvs2">date</td>
          </tr>
          <tr>
            <td class="tg-c3ma">status</td>
            <td class="tg-c3ma">string</td>
            <td class="tg-c3ma">Possible values are: [‘open’, <br>'closed’, ‘fraud’]</td>
          </tr>
          <tr>
            <td class="tg-lvs2">spend</td>
            <td class="tg-lvs2">double</td>
            <td class="tg-lvs2">Amount of spend in USD</td>
          </tr>
        </table>

        <br></br>
        More information about the table:
        <ul>
        <li>Granularity of the table is ad_account and day</li>
        <li>Accounts get labeled by Hooli as fraudulent and they cannot advertiser</li>
        <li>Assume “close” and “fraud” are permanent labels</li>
        <li>Active = daily spend > 0 </li>
        <li>Every day of the table has every account that has ever advertised at Hooli</li>
        </ul>


        <hr></hr>

        <br></br>

        <b>Q1)</b> What percent of active advertisers were fraudulently by day for each day in the last month?
        <br></br>
        Clarification:
        <ul>
            <li> We want one value for each day, not toal across whole month</li>
            <li>An account can be fraudulent and active on same day. (e.g . they could spend until 2PM on a given day then be flagged as fraudulent.) </li>
        </ul>
        <br>
        
        <pre class="prettyprint" style="width: 60%">
    active = df[df.spend >0].copy()
    active[‘is_fraud’] = active.status == ‘fraud’
    pct = active.groupby(‘date’).is_fraud.mean() * 100</pre>

        <br></br>
        <b>Q2)</b> How many accounts were first labeled as fraudulent today?
        <br></br>
        Clarification:
        <ul>
            <li> An account can have only one status for a given day</li>
            <li>Closed and fraud status are permanent </li>
        </ul>
        <br>

        <pre class="prettyprint" style="width: 60%">
    fraud = df[df.status == ‘fraud’]
    yesterday = fraud[fraud.date == ‘{today}’][[‘account_id’]]
    prev_day = fraud[fraud.date == ‘{yesterday}’][[‘account_id’]]
    both_days = pd.merge(yestereday, prev_day, on=’ad_account’, how=’left’)
    n_new = both_days.iloc[:, 1].is_null().sum()</pre>

        <br></br>
        <b>Q3)</b> Now assume that we recently rolled out an appeals process such a “FRAUD” tag can be set back to “OPEN”. How would you measure the financial benefit of this change?

        <br>

        <pre class="prettyprint" style="width: 60%">
    fraud = df[df.status == ‘fraud’]
    last_fraud_day = fraud.groupby(‘account_id’).date.max().reset_index()
    df2 = pd.merge(df, fraud, on=’account_id’)
    after_fraud = df2[df2.date_x > df2.date_y]
    total = after_fraud.spend.sum()</pre>


        </div>
        <!-- Footer -->


    </div>
    <!-- /.container -->



</body>




<footer>
    <div class="row">
        <div class="col-lg-12">
            <p>Copyright &copy; Crystal Rood 2017</p>
        </div>
        <!-- /.col-lg-12 -->
    </div>
    <!-- /.row -->
</footer>


</html>